ARM GAS  /tmp/ccx2FAua.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"sys_usb.c"
  12              		.section	.text.GetInterfaceStrDescriptor,"ax",%progbits
  13              		.align	1
  14              		.syntax unified
  15              		.thumb
  16              		.thumb_func
  17              		.fpu softvfp
  19              	GetInterfaceStrDescriptor:
  20              		@ args = 0, pretend = 0, frame = 8
  21              		@ frame_needed = 0, uses_anonymous_args = 0
  22 0000 13B5     		push	{r0, r1, r4, lr}
  23 0002 0C46     		mov	r4, r1
  24 0004 6846     		mov	r0, sp
  25 0006 0621     		movs	r1, #6
  26 0008 FFF7FEFF 		bl	IK_USB_HW_GetUSBDescriptor
  27 000c 019B     		ldr	r3, [sp, #4]
  28 000e 0098     		ldr	r0, [sp]
  29 0010 2380     		strh	r3, [r4]	@ movhi
  30 0012 02B0     		add	sp, sp, #8
  31              		@ sp needed
  32 0014 10BD     		pop	{r4, pc}
  34              		.section	.text.GetConfigurationStrDescriptor,"ax",%progbits
  35              		.align	1
  36              		.syntax unified
  37              		.thumb
  38              		.thumb_func
  39              		.fpu softvfp
  41              	GetConfigurationStrDescriptor:
  42              		@ args = 0, pretend = 0, frame = 0
  43              		@ frame_needed = 0, uses_anonymous_args = 0
  44              		@ link register save eliminated.
  45 0000 FFF7FEBF 		b	GetInterfaceStrDescriptor
  47              		.section	.text.GetSerialStrDescriptor,"ax",%progbits
  48              		.align	1
  49              		.syntax unified
  50              		.thumb
  51              		.thumb_func
  52              		.fpu softvfp
  54              	GetSerialStrDescriptor:
  55              		@ args = 0, pretend = 0, frame = 0
  56              		@ frame_needed = 0, uses_anonymous_args = 0
  57              		@ link register save eliminated.
  58 0000 FFF7FEBF 		b	GetInterfaceStrDescriptor
  60              		.section	.text.GetProductStrDescriptor,"ax",%progbits
  61              		.align	1
  62              		.syntax unified
  63              		.thumb
ARM GAS  /tmp/ccx2FAua.s 			page 2


  64              		.thumb_func
  65              		.fpu softvfp
  67              	GetProductStrDescriptor:
  68              		@ args = 0, pretend = 0, frame = 8
  69              		@ frame_needed = 0, uses_anonymous_args = 0
  70 0000 13B5     		push	{r0, r1, r4, lr}
  71 0002 0C46     		mov	r4, r1
  72 0004 6846     		mov	r0, sp
  73 0006 0521     		movs	r1, #5
  74 0008 FFF7FEFF 		bl	IK_USB_HW_GetUSBDescriptor
  75 000c 019B     		ldr	r3, [sp, #4]
  76 000e 0098     		ldr	r0, [sp]
  77 0010 2380     		strh	r3, [r4]	@ movhi
  78 0012 02B0     		add	sp, sp, #8
  79              		@ sp needed
  80 0014 10BD     		pop	{r4, pc}
  82              		.section	.text.GetManufacturerStrDescriptor,"ax",%progbits
  83              		.align	1
  84              		.syntax unified
  85              		.thumb
  86              		.thumb_func
  87              		.fpu softvfp
  89              	GetManufacturerStrDescriptor:
  90              		@ args = 0, pretend = 0, frame = 8
  91              		@ frame_needed = 0, uses_anonymous_args = 0
  92 0000 13B5     		push	{r0, r1, r4, lr}
  93 0002 0C46     		mov	r4, r1
  94 0004 6846     		mov	r0, sp
  95 0006 0421     		movs	r1, #4
  96 0008 FFF7FEFF 		bl	IK_USB_HW_GetUSBDescriptor
  97 000c 019B     		ldr	r3, [sp, #4]
  98 000e 0098     		ldr	r0, [sp]
  99 0010 2380     		strh	r3, [r4]	@ movhi
 100 0012 02B0     		add	sp, sp, #8
 101              		@ sp needed
 102 0014 10BD     		pop	{r4, pc}
 104              		.section	.text.GetLangIDStrDescriptor,"ax",%progbits
 105              		.align	1
 106              		.syntax unified
 107              		.thumb
 108              		.thumb_func
 109              		.fpu softvfp
 111              	GetLangIDStrDescriptor:
 112              		@ args = 0, pretend = 0, frame = 8
 113              		@ frame_needed = 0, uses_anonymous_args = 0
 114 0000 13B5     		push	{r0, r1, r4, lr}
 115 0002 0C46     		mov	r4, r1
 116 0004 6846     		mov	r0, sp
 117 0006 0321     		movs	r1, #3
 118 0008 FFF7FEFF 		bl	IK_USB_HW_GetUSBDescriptor
 119 000c 019B     		ldr	r3, [sp, #4]
 120 000e 0098     		ldr	r0, [sp]
 121 0010 2380     		strh	r3, [r4]	@ movhi
 122 0012 02B0     		add	sp, sp, #8
 123              		@ sp needed
 124 0014 10BD     		pop	{r4, pc}
 126              		.section	.text.GetDeviceDescriptor,"ax",%progbits
ARM GAS  /tmp/ccx2FAua.s 			page 3


 127              		.align	1
 128              		.syntax unified
 129              		.thumb
 130              		.thumb_func
 131              		.fpu softvfp
 133              	GetDeviceDescriptor:
 134              		@ args = 0, pretend = 0, frame = 8
 135              		@ frame_needed = 0, uses_anonymous_args = 0
 136 0000 13B5     		push	{r0, r1, r4, lr}
 137 0002 0C46     		mov	r4, r1
 138 0004 6846     		mov	r0, sp
 139 0006 0021     		movs	r1, #0
 140 0008 FFF7FEFF 		bl	IK_USB_HW_GetUSBDescriptor
 141 000c 019B     		ldr	r3, [sp, #4]
 142 000e 0098     		ldr	r0, [sp]
 143 0010 2380     		strh	r3, [r4]	@ movhi
 144 0012 02B0     		add	sp, sp, #8
 145              		@ sp needed
 146 0014 10BD     		pop	{r4, pc}
 148              		.section	.text.SYS_USB_Init,"ax",%progbits
 149              		.align	1
 150              		.global	SYS_USB_Init
 151              		.syntax unified
 152              		.thumb
 153              		.thumb_func
 154              		.fpu softvfp
 156              	SYS_USB_Init:
 157              		@ args = 0, pretend = 0, frame = 0
 158              		@ frame_needed = 0, uses_anonymous_args = 0
 159 0000 10B5     		push	{r4, lr}
 160 0002 274C     		ldr	r4, .L30
 161 0004 2068     		ldr	r0, [r4]
 162 0006 08B1     		cbz	r0, .L9
 163 0008 FFF7FEFF 		bl	free
 164              	.L9:
 165 000c 4FF40970 		mov	r0, #548
 166 0010 FFF7FEFF 		bl	malloc
 167 0014 2060     		str	r0, [r4]
 168 0016 28B9     		cbnz	r0, .L10
 169 0018 224B     		ldr	r3, .L30+4
 170 001a 234A     		ldr	r2, .L30+8
 171 001c 3721     		movs	r1, #55
 172 001e 0220     		movs	r0, #2
 173 0020 FFF7FEFF 		bl	SYS_ThrowError
 174              	.L10:
 175 0024 2148     		ldr	r0, .L30+12
 176 0026 FFF7FEFF 		bl	CONSOLE_PrintLn
 177 002a 0022     		movs	r2, #0
 178 002c 2049     		ldr	r1, .L30+16
 179 002e 2068     		ldr	r0, [r4]
 180 0030 FFF7FEFF 		bl	USBD_Init
 181 0034 28B1     		cbz	r0, .L11
 182 0036 1F4B     		ldr	r3, .L30+20
 183 0038 1B4A     		ldr	r2, .L30+8
 184 003a 3C21     		movs	r1, #60
 185 003c 0220     		movs	r0, #2
 186 003e FFF7FEFF 		bl	SYS_ThrowError
ARM GAS  /tmp/ccx2FAua.s 			page 4


 187              	.L11:
 188 0042 1D48     		ldr	r0, .L30+24
 189 0044 FFF7FEFF 		bl	CONSOLE_PrintLn
 190 0048 1C49     		ldr	r1, .L30+28
 191 004a 2068     		ldr	r0, [r4]
 192 004c FFF7FEFF 		bl	USBD_RegisterClass
 193 0050 28B1     		cbz	r0, .L12
 194 0052 1B4B     		ldr	r3, .L30+32
 195 0054 144A     		ldr	r2, .L30+8
 196 0056 4121     		movs	r1, #65
 197 0058 0220     		movs	r0, #2
 198 005a FFF7FEFF 		bl	SYS_ThrowError
 199              	.L12:
 200 005e 1948     		ldr	r0, .L30+36
 201 0060 FFF7FEFF 		bl	CONSOLE_PrintLn
 202 0064 1849     		ldr	r1, .L30+40
 203 0066 2068     		ldr	r0, [r4]
 204 0068 FFF7FEFF 		bl	IK_STM32CUBE_USBD_HID_RegisterInterface
 205 006c 28B1     		cbz	r0, .L13
 206 006e 174B     		ldr	r3, .L30+44
 207 0070 0D4A     		ldr	r2, .L30+8
 208 0072 4621     		movs	r1, #70
 209 0074 0220     		movs	r0, #2
 210 0076 FFF7FEFF 		bl	SYS_ThrowError
 211              	.L13:
 212 007a 1548     		ldr	r0, .L30+48
 213 007c FFF7FEFF 		bl	CONSOLE_PrintLn
 214 0080 2068     		ldr	r0, [r4]
 215 0082 FFF7FEFF 		bl	USBD_Start
 216 0086 28B1     		cbz	r0, .L14
 217 0088 124B     		ldr	r3, .L30+52
 218 008a 074A     		ldr	r2, .L30+8
 219 008c 4B21     		movs	r1, #75
 220 008e 0220     		movs	r0, #2
 221 0090 FFF7FEFF 		bl	SYS_ThrowError
 222              	.L14:
 223 0094 BDE81040 		pop	{r4, lr}
 224 0098 0F48     		ldr	r0, .L30+56
 225 009a FFF7FEBF 		b	CONSOLE_PrintLn
 226              	.L31:
 227 009e 00BF     		.align	2
 228              	.L30:
 229 00a0 00000000 		.word	.LANCHOR0
 230 00a4 00000000 		.word	.LC0
 231 00a8 1F000000 		.word	.LC1
 232 00ac 2D000000 		.word	.LC2
 233 00b0 00000000 		.word	.LANCHOR1
 234 00b4 55000000 		.word	.LC3
 235 00b8 67000000 		.word	.LC4
 236 00bc 00000000 		.word	IK_HID_Class
 237 00c0 8A000000 		.word	.LC5
 238 00c4 AA000000 		.word	.LC6
 239 00c8 00000000 		.word	IK_USBD_HID_Itf
 240 00cc D6000000 		.word	.LC7
 241 00d0 FA000000 		.word	.LC8
 242 00d4 2A010000 		.word	.LC9
 243 00d8 42010000 		.word	.LC10
ARM GAS  /tmp/ccx2FAua.s 			page 5


 245              		.section	.text.SYS_USB_DeInit,"ax",%progbits
 246              		.align	1
 247              		.global	SYS_USB_DeInit
 248              		.syntax unified
 249              		.thumb
 250              		.thumb_func
 251              		.fpu softvfp
 253              	SYS_USB_DeInit:
 254              		@ args = 0, pretend = 0, frame = 0
 255              		@ frame_needed = 0, uses_anonymous_args = 0
 256 0000 10B5     		push	{r4, lr}
 257 0002 034C     		ldr	r4, .L33
 258 0004 2068     		ldr	r0, [r4]
 259 0006 FFF7FEFF 		bl	free
 260 000a 0023     		movs	r3, #0
 261 000c 2360     		str	r3, [r4]
 262 000e 10BD     		pop	{r4, pc}
 263              	.L34:
 264              		.align	2
 265              	.L33:
 266 0010 00000000 		.word	.LANCHOR0
 268              		.global	_IK_USB_DESCRIPTOR_DEV_QUALIF
 269              		.global	hw_usbd_handle
 270              		.section	.bss.hw_usbd_handle,"aw",%nobits
 271              		.align	2
 272              		.set	.LANCHOR0,. + 0
 275              	hw_usbd_handle:
 276 0000 00000000 		.space	4
 277              		.section	.data._IK_USB_DESCRIPTOR_DEV_QUALIF,"aw",%progbits
 280              	_IK_USB_DESCRIPTOR_DEV_QUALIF:
 281 0000 0A       		.byte	10
 282 0001 06       		.byte	6
 283 0002 00       		.byte	0
 284 0003 02       		.byte	2
 285 0004 00       		.byte	0
 286 0005 00       		.byte	0
 287 0006 00       		.byte	0
 288 0007 40       		.byte	64
 289 0008 01       		.byte	1
 290 0009 00       		.byte	0
 291              		.section	.data._usbd_desc,"aw",%progbits
 292              		.align	2
 293              		.set	.LANCHOR1,. + 0
 296              	_usbd_desc:
 297 0000 00000000 		.word	GetDeviceDescriptor
 298 0004 00000000 		.word	GetLangIDStrDescriptor
 299 0008 00000000 		.word	GetManufacturerStrDescriptor
 300 000c 00000000 		.word	GetProductStrDescriptor
 301 0010 00000000 		.word	GetSerialStrDescriptor
 302 0014 00000000 		.word	GetConfigurationStrDescriptor
 303 0018 00000000 		.word	GetInterfaceStrDescriptor
 304              		.section	.rodata.SYS_USB_Init.str1.1,"aMS",%progbits,1
 305              	.LC0:
 306 0000 55534244 		.ascii	"USBD-handle allocation failed.\000"
 306      2D68616E 
 306      646C6520 
 306      616C6C6F 
ARM GAS  /tmp/ccx2FAua.s 			page 6


 306      63617469 
 307              	.LC1:
 308 001f 7372632F 		.ascii	"src/sys_usb.c\000"
 308      7379735F 
 308      7573622E 
 308      6300
 309              	.LC2:
 310 002d 5B535953 		.ascii	"[SYS-USB] Allocated USBD-handle memory.\000"
 310      2D555342 
 310      5D20416C 
 310      6C6F6361 
 310      74656420 
 311              	.LC3:
 312 0055 55534244 		.ascii	"USBD-init failed.\000"
 312      2D696E69 
 312      74206661 
 312      696C6564 
 312      2E00
 313              	.LC4:
 314 0067 5B535953 		.ascii	"[SYS-USB] Initialised USBD handle.\000"
 314      2D555342 
 314      5D20496E 
 314      69746961 
 314      6C697365 
 315              	.LC5:
 316 008a 55534244 		.ascii	"USBD class registration failed.\000"
 316      20636C61 
 316      73732072 
 316      65676973 
 316      74726174 
 317              	.LC6:
 318 00aa 5B535953 		.ascii	"[SYS-USB] Registered InfiniKeys USBD class.\000"
 318      2D555342 
 318      5D205265 
 318      67697374 
 318      65726564 
 319              	.LC7:
 320 00d6 55534244 		.ascii	"USBD interface registration failed.\000"
 320      20696E74 
 320      65726661 
 320      63652072 
 320      65676973 
 321              	.LC8:
 322 00fa 5B535953 		.ascii	"[SYS-USB] Registered InfiniKeys USBD interface.\000"
 322      2D555342 
 322      5D205265 
 322      67697374 
 322      65726564 
 323              	.LC9:
 324 012a 55534244 		.ascii	"USBD port-start failed.\000"
 324      20706F72 
 324      742D7374 
 324      61727420 
 324      6661696C 
 325              	.LC10:
 326 0142 5B535953 		.ascii	"[SYS-USB] Initialised USBD. Started USB connection."
 326      2D555342 
ARM GAS  /tmp/ccx2FAua.s 			page 7


 326      5D20496E 
 326      69746961 
 326      6C697365 
 327 0175 00       		.ascii	"\000"
 328              		.ident	"GCC: (15:6.3.1+svn253039-1build1) 6.3.1 20170620"
ARM GAS  /tmp/ccx2FAua.s 			page 8


DEFINED SYMBOLS
                            *ABS*:0000000000000000 sys_usb.c
     /tmp/ccx2FAua.s:13     .text.GetInterfaceStrDescriptor:0000000000000000 $t
     /tmp/ccx2FAua.s:19     .text.GetInterfaceStrDescriptor:0000000000000000 GetInterfaceStrDescriptor
     /tmp/ccx2FAua.s:35     .text.GetConfigurationStrDescriptor:0000000000000000 $t
     /tmp/ccx2FAua.s:41     .text.GetConfigurationStrDescriptor:0000000000000000 GetConfigurationStrDescriptor
     /tmp/ccx2FAua.s:48     .text.GetSerialStrDescriptor:0000000000000000 $t
     /tmp/ccx2FAua.s:54     .text.GetSerialStrDescriptor:0000000000000000 GetSerialStrDescriptor
     /tmp/ccx2FAua.s:61     .text.GetProductStrDescriptor:0000000000000000 $t
     /tmp/ccx2FAua.s:67     .text.GetProductStrDescriptor:0000000000000000 GetProductStrDescriptor
     /tmp/ccx2FAua.s:83     .text.GetManufacturerStrDescriptor:0000000000000000 $t
     /tmp/ccx2FAua.s:89     .text.GetManufacturerStrDescriptor:0000000000000000 GetManufacturerStrDescriptor
     /tmp/ccx2FAua.s:105    .text.GetLangIDStrDescriptor:0000000000000000 $t
     /tmp/ccx2FAua.s:111    .text.GetLangIDStrDescriptor:0000000000000000 GetLangIDStrDescriptor
     /tmp/ccx2FAua.s:127    .text.GetDeviceDescriptor:0000000000000000 $t
     /tmp/ccx2FAua.s:133    .text.GetDeviceDescriptor:0000000000000000 GetDeviceDescriptor
     /tmp/ccx2FAua.s:149    .text.SYS_USB_Init:0000000000000000 $t
     /tmp/ccx2FAua.s:156    .text.SYS_USB_Init:0000000000000000 SYS_USB_Init
     /tmp/ccx2FAua.s:229    .text.SYS_USB_Init:00000000000000a0 $d
     /tmp/ccx2FAua.s:246    .text.SYS_USB_DeInit:0000000000000000 $t
     /tmp/ccx2FAua.s:253    .text.SYS_USB_DeInit:0000000000000000 SYS_USB_DeInit
     /tmp/ccx2FAua.s:266    .text.SYS_USB_DeInit:0000000000000010 $d
     /tmp/ccx2FAua.s:280    .data._IK_USB_DESCRIPTOR_DEV_QUALIF:0000000000000000 _IK_USB_DESCRIPTOR_DEV_QUALIF
     /tmp/ccx2FAua.s:275    .bss.hw_usbd_handle:0000000000000000 hw_usbd_handle
     /tmp/ccx2FAua.s:271    .bss.hw_usbd_handle:0000000000000000 $d
     /tmp/ccx2FAua.s:292    .data._usbd_desc:0000000000000000 $d
     /tmp/ccx2FAua.s:296    .data._usbd_desc:0000000000000000 _usbd_desc

UNDEFINED SYMBOLS
IK_USB_HW_GetUSBDescriptor
free
malloc
SYS_ThrowError
CONSOLE_PrintLn
USBD_Init
USBD_RegisterClass
IK_STM32CUBE_USBD_HID_RegisterInterface
USBD_Start
IK_HID_Class
IK_USBD_HID_Itf
